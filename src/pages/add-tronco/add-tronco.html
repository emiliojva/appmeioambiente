<!--
  Generated template for the AddTroncoPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar>
    
    <button ion-button menuToggle icon-only>
        <ion-icon name='menu'></ion-icon>
    </button>
    <ion-title>add-tronco</ion-title>
  
  </ion-navbar>

</ion-header>


<ion-content padding>
  
    <!-- <form-tronco></form-tronco> -->

    <mat-accordion *ngIf="troncos">
        
        <!-- <ion-item style="cursor: pointer" *ngFor="let e of estacaos; index as i" > -->
        <mat-expansion-panel [expanded]="step===i" (opened)="setStep(i)" *ngFor="let tronco of troncos; index as i">

          <mat-expansion-panel-header>
            <mat-panel-title>
              TRONCO - {{i+1}}
            </mat-panel-title>
          </mat-expansion-panel-header>

          <form [formGroup]="troncoFormArray[i]" (ngSubmit)="logForm(i)">

            <!-- <ion-input type="hidden" [value]="tronco.individuoID" formControlName="local_id" required></ion-input> -->
      
              <ion-list>
      
                  <!-- <ion-input type="hidden" [value]="local_selected.id" formControlName="local_id" required></ion-input> -->
      
                  <ion-item>
                    <ion-label stacked>Lacre</ion-label>
                    <ion-input formControlName="tronco_lacre" type="number"  id="tronco_lacre" required></ion-input>
                  </ion-item>
                
                  <ion-item>
                    <ion-label stacked>DAP</ion-label>
                    <ion-input formControlName="tronco_dap" type="number" id="tronco_dap" required></ion-input>
                  </ion-item>
      
                  <ion-item>
                    <ion-label stacked>Observação</ion-label>
                    <ion-textarea formControlName="tronco_obs" id="tronco_observacao" rows="3" ></ion-textarea>
                  </ion-item>
      

                  <!-- <ion-input type="hidden" formControlName="tronco_cond" value="1"></ion-input> -->

                  <ion-list radio-group formControlName="tronco_cond">
      
                      <ion-list-header>
                          Condição:
                      </ion-list-header>
                    <ion-item>
                        <ion-label>Vivo</ion-label>
                        <ion-radio value="1" color="dark"></ion-radio>
                    </ion-item>
                    <ion-item>
                        <ion-label>Morto</ion-label>
                        <ion-radio value="0" color="dark"></ion-radio>
                    </ion-item>
                  </ion-list>
      
                  <ion-buttons padding >
                    <button ion-button [disabled]="!troncoFormArray[i].valid">Gravar</button>
                    <button ion-button type='reset'>Limpar</button>
                  </ion-buttons>

                  <mat-action-row>
                    <button [style.display]="i > 0 ? '' : 'none'" mat-button color="warn" (click)="prevStep()">Anterior</button>|
                    <button [style.display]="(i+1) < troncos.length  ? '' : 'none'" mat-button color="primary" (click)="nextStep()">Próximo</button>
                  </mat-action-row>
              
                
              </ion-list>


              

              {{troncoFormArray[i].value | json}}

              {{troncoFormArray[i].valid | json}}
            </form>
      
      
        </mat-expansion-panel>

        <ion-buttons padding >
            <button ion-button (click)="closeForm()">Gravar</button>
        </ion-buttons>

        
        
    </mat-accordion>
        

</ion-content>














































<mat-expansion-panel *ngIf="1>2" (opened)="panelOpenState = true"
                              (closed)="panelOpenState = false">
      
      
          <mat-expansion-panel-header>
            <mat-panel-title>
              TRONCO 2
            </mat-panel-title>
          </mat-expansion-panel-header>
      
          <form>
      
              <ion-list>
      
                  <!-- <ion-input type="hidden" [value]="local_selected.id" formControlName="local_id" required></ion-input> -->
      
                  <ion-item>
                    <ion-label stacked>Lacre</ion-label>
                    <ion-input type="number"  id="tronco_lacre" required></ion-input>
                  </ion-item>
                
                  <ion-item>
                    <ion-label stacked>DAP</ion-label>
                    <ion-input type="number" id="tronco_dap" required></ion-input>
                  </ion-item>
      
                  <ion-item>
                    <ion-label stacked>Observação</ion-label>
                    <ion-textarea id="tronco_observacao" rows="3" ></ion-textarea>
                  </ion-item>
      
                  <ion-list radio-group>
      
                      <ion-list-header>
                          Condição:
                      </ion-list-header>
                    <ion-item>
                        <ion-label>Vivo</ion-label>
                        <ion-radio color="dark"></ion-radio>
                    </ion-item>
                    <ion-item>
                        <ion-label>Morto</ion-label>
                        <ion-radio color="dark"></ion-radio>
                    </ion-item>
                  </ion-list>
      
                  <ion-buttons padding>
                    <button ion-button>Gravar</button>
                    <button ion-button type='reset'>Limpar</button>
                  </ion-buttons>
                
              </ion-list>
      
            </form>
          
          
        </mat-expansion-panel>